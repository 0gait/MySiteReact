{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\tiriq\\\\Documents\\\\Tiago\\\\MyThings\\\\MyProjects\\\\site\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\tiriq\\\\Documents\\\\Tiago\\\\MyThings\\\\MyProjects\\\\site\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\tiriq\\\\Documents\\\\Tiago\\\\MyThings\\\\MyProjects\\\\site\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\n/**\r\n * DevExtreme (esm/ui/toolbar/strategy/toolbar.singleline.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getWidth, getOuterWidth } from \"../../../core/utils/size\";\nimport $ from \"../../../core/renderer\";\nimport { each } from \"../../../core/utils/iterator\";\nimport { grep, deferRender } from \"../../../core/utils/common\";\nimport { extend } from \"../../../core/utils/extend\";\nimport DropDownMenu from \"../internal/ui.toolbar.menu\";\nimport { compileGetter } from \"../../../core/utils/data\";\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\nvar TOOLBAR_DROP_DOWN_MENU_CONTAINER_CLASS = \"dx-toolbar-menu-container\";\nvar TOOLBAR_BUTTON_CLASS = \"dx-toolbar-button\";\nvar TOOLBAR_AUTO_HIDE_ITEM_CLASS = \"dx-toolbar-item-auto-hide\";\nvar TOOLBAR_HIDDEN_ITEM = \"dx-toolbar-item-invisible\";\nexport var SingleLineStrategy = /*#__PURE__*/function () {\n  function SingleLineStrategy(toolbar) {\n    _classCallCheck(this, SingleLineStrategy);\n    this._toolbar = toolbar;\n  }\n  _createClass(SingleLineStrategy, [{\n    key: \"_initMarkup\",\n    value: function _initMarkup() {\n      var _this = this;\n      deferRender(function () {\n        _this._renderOverflowMenu();\n        _this._renderMenuItems();\n      });\n    }\n  }, {\n    key: \"_renderOverflowMenu\",\n    value: function _renderOverflowMenu() {\n      var _this2 = this;\n      if (!this._hasVisibleMenuItems()) {\n        return;\n      }\n      this._renderMenuButtonContainer();\n      var $menu = $(\"<div>\").appendTo(this._overflowMenuContainer());\n      var itemClickAction = this._toolbar._createActionByOption(\"onItemClick\");\n      var menuItemTemplate = this._toolbar._getTemplateByOption(\"menuItemTemplate\");\n      this._menu = this._toolbar._createComponent($menu, DropDownMenu, {\n        disabled: this._toolbar.option(\"disabled\"),\n        itemTemplate: function itemTemplate() {\n          return menuItemTemplate;\n        },\n        onItemClick: function onItemClick(e) {\n          itemClickAction(e);\n        },\n        container: this._toolbar.option(\"menuContainer\"),\n        onOptionChanged: function onOptionChanged(_ref) {\n          var name = _ref.name,\n            value = _ref.value;\n          if (\"opened\" === name) {\n            _this2._toolbar.option(\"overflowMenuVisible\", value);\n          }\n          if (\"items\" === name) {\n            _this2._updateMenuVisibility(value);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"renderMenuItems\",\n    value: function renderMenuItems() {\n      if (!this._menu) {\n        this._renderOverflowMenu();\n      }\n      this._menu && this._menu.option(\"items\", this._getMenuItems());\n      if (this._menu && !this._menu.option(\"items\").length) {\n        this._menu.option(\"opened\", false);\n      }\n    }\n  }, {\n    key: \"_renderMenuButtonContainer\",\n    value: function _renderMenuButtonContainer() {\n      this._$overflowMenuContainer = $(\"<div>\").appendTo(this._toolbar._$afterSection).addClass(TOOLBAR_BUTTON_CLASS).addClass(TOOLBAR_DROP_DOWN_MENU_CONTAINER_CLASS);\n    }\n  }, {\n    key: \"_overflowMenuContainer\",\n    value: function _overflowMenuContainer() {\n      return this._$overflowMenuContainer;\n    }\n  }, {\n    key: \"_updateMenuVisibility\",\n    value: function _updateMenuVisibility(menuItems) {\n      var items = null !== menuItems && void 0 !== menuItems ? menuItems : this._getMenuItems();\n      var isMenuVisible = items.length && this._hasVisibleMenuItems(items);\n      this._toggleMenuVisibility(isMenuVisible);\n    }\n  }, {\n    key: \"_toggleMenuVisibility\",\n    value: function _toggleMenuVisibility(value) {\n      if (!this._overflowMenuContainer()) {\n        return;\n      }\n      this._overflowMenuContainer().toggleClass(INVISIBLE_STATE_CLASS, !value);\n    }\n  }, {\n    key: \"_renderMenuItems\",\n    value: function _renderMenuItems() {\n      var _this3 = this;\n      deferRender(function () {\n        _this3.renderMenuItems();\n      });\n    }\n  }, {\n    key: \"_dimensionChanged\",\n    value: function _dimensionChanged() {\n      this.renderMenuItems();\n    }\n  }, {\n    key: \"_getToolbarItems\",\n    value: function _getToolbarItems() {\n      var _this4 = this;\n      var _this$_toolbar$option;\n      return grep(null !== (_this$_toolbar$option = this._toolbar.option(\"items\")) && void 0 !== _this$_toolbar$option ? _this$_toolbar$option : [], function (item) {\n        return !_this4._toolbar._isMenuItem(item);\n      });\n    }\n  }, {\n    key: \"_getMenuItems\",\n    value: function _getMenuItems() {\n      var _this5 = this;\n      var _this$_toolbar$option2, _this$_restoreItems;\n      var menuItems = grep(null !== (_this$_toolbar$option2 = this._toolbar.option(\"items\")) && void 0 !== _this$_toolbar$option2 ? _this$_toolbar$option2 : [], function (item) {\n        return _this5._toolbar._isMenuItem(item);\n      });\n      var $hiddenItems = this._toolbar._itemContainer().children(\".\".concat(TOOLBAR_AUTO_HIDE_ITEM_CLASS, \".\").concat(TOOLBAR_HIDDEN_ITEM)).not(\".\".concat(INVISIBLE_STATE_CLASS));\n      this._restoreItems = null !== (_this$_restoreItems = this._restoreItems) && void 0 !== _this$_restoreItems ? _this$_restoreItems : [];\n      var overflowItems = [].slice.call($hiddenItems).map(function (item) {\n        var itemData = _this5._toolbar._getItemData(item);\n        var $itemContainer = $(item);\n        var $itemMarkup = $itemContainer.children();\n        return extend({\n          menuItemTemplate: function menuItemTemplate() {\n            _this5._restoreItems.push({\n              container: $itemContainer,\n              item: $itemMarkup\n            });\n            var $container = $(\"<div>\").addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n            return $container.append($itemMarkup);\n          }\n        }, itemData);\n      });\n      return [].concat(_toConsumableArray(overflowItems), _toConsumableArray(menuItems));\n    }\n  }, {\n    key: \"_hasVisibleMenuItems\",\n    value: function _hasVisibleMenuItems(items) {\n      var menuItems = null !== items && void 0 !== items ? items : this._toolbar.option(\"items\");\n      var result = false;\n      var optionGetter = compileGetter(\"visible\");\n      var overflowGetter = compileGetter(\"locateInMenu\");\n      each(menuItems, function (index, item) {\n        var itemVisible = optionGetter(item, {\n          functionsAsIs: true\n        });\n        var itemOverflow = overflowGetter(item, {\n          functionsAsIs: true\n        });\n        if (false !== itemVisible && (\"auto\" === itemOverflow || \"always\" === itemOverflow) || \"menu\" === item.location) {\n          result = true;\n        }\n      });\n      return result;\n    }\n  }, {\n    key: \"_arrangeItems\",\n    value: function _arrangeItems() {\n      var _this$_restoreItems2;\n      this._toolbar._$centerSection.css({\n        margin: \"0 auto\",\n        float: \"none\"\n      });\n      each(null !== (_this$_restoreItems2 = this._restoreItems) && void 0 !== _this$_restoreItems2 ? _this$_restoreItems2 : [], function (_, obj) {\n        $(obj.container).append(obj.item);\n      });\n      this._restoreItems = [];\n      var elementWidth = getWidth(this._toolbar.$element());\n      this._hideOverflowItems(elementWidth);\n      return elementWidth;\n    }\n  }, {\n    key: \"_hideOverflowItems\",\n    value: function _hideOverflowItems(elementWidth) {\n      var _elementWidth;\n      var overflowItems = this._toolbar.$element().find(\".\".concat(TOOLBAR_AUTO_HIDE_ITEM_CLASS));\n      if (!overflowItems.length) {\n        return;\n      }\n      elementWidth = null !== (_elementWidth = elementWidth) && void 0 !== _elementWidth ? _elementWidth : getWidth(this._toolbar.$element());\n      $(overflowItems).removeClass(TOOLBAR_HIDDEN_ITEM);\n      var itemsWidth = this._getItemsWidth();\n      while (overflowItems.length && elementWidth < itemsWidth) {\n        var $item = overflowItems.eq(-1);\n        itemsWidth -= getOuterWidth($item);\n        $item.addClass(TOOLBAR_HIDDEN_ITEM);\n        overflowItems.splice(-1, 1);\n      }\n    }\n  }, {\n    key: \"_getItemsWidth\",\n    value: function _getItemsWidth() {\n      return this._toolbar._getSummaryItemsWidth([this._toolbar._$beforeSection, this._toolbar._$centerSection, this._toolbar._$afterSection]);\n    }\n  }, {\n    key: \"_itemOptionChanged\",\n    value: function _itemOptionChanged(item, property, value) {\n      if (this._toolbar._isMenuItem(item)) {\n        if (\"disabled\" === property || \"options.disabled\" === property) {\n          var _this$_menu;\n          null === (_this$_menu = this._menu) || void 0 === _this$_menu ? void 0 : _this$_menu._itemOptionChanged(item, property, value);\n          return;\n        }\n      }\n      this.renderMenuItems();\n    }\n  }, {\n    key: \"_renderItem\",\n    value: function _renderItem(item, itemElement) {\n      if (\"auto\" === item.locateInMenu) {\n        itemElement.addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n      }\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function _optionChanged(name, value) {\n      var _this$_menu2, _this$_menu3, _this$_menu4, _this$_menu5, _this$_menu6;\n      switch (name) {\n        case \"disabled\":\n          null === (_this$_menu2 = this._menu) || void 0 === _this$_menu2 ? void 0 : _this$_menu2.option(name, value);\n          break;\n        case \"overflowMenuVisible\":\n          null === (_this$_menu3 = this._menu) || void 0 === _this$_menu3 ? void 0 : _this$_menu3.option(\"opened\", value);\n          break;\n        case \"onItemClick\":\n          null === (_this$_menu4 = this._menu) || void 0 === _this$_menu4 ? void 0 : _this$_menu4.option(name, value);\n          break;\n        case \"menuContainer\":\n          null === (_this$_menu5 = this._menu) || void 0 === _this$_menu5 ? void 0 : _this$_menu5.option(\"container\", value);\n          break;\n        case \"menuItemTemplate\":\n          null === (_this$_menu6 = this._menu) || void 0 === _this$_menu6 ? void 0 : _this$_menu6.option(\"itemTemplate\", value);\n      }\n    }\n  }]);\n  return SingleLineStrategy;\n}();","map":null,"metadata":{},"sourceType":"module"}