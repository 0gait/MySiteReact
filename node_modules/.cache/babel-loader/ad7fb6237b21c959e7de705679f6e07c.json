{"ast":null,"code":"import { padStart } from './helpers';\nexport var datetime = function datetime(y, m, d, h, i, s) {\n  if (h === void 0) {\n    h = 0;\n  }\n  if (i === void 0) {\n    i = 0;\n  }\n  if (s === void 0) {\n    s = 0;\n  }\n  return new Date(Date.UTC(y, m - 1, d, h, i, s));\n};\n/**\n * General date-related utilities.\n * Also handles several incompatibilities between JavaScript and Python\n *\n */\nexport var MONTH_DAYS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n/**\n * Number of milliseconds of one day\n */\nexport var ONE_DAY = 1000 * 60 * 60 * 24;\n/**\n * @see: <http://docs.python.org/library/datetime.html#datetime.MAXYEAR>\n */\nexport var MAXYEAR = 9999;\n/**\n * Python uses 1-Jan-1 as the base for calculating ordinals but we don't\n * want to confuse the JS engine with milliseconds > Number.MAX_NUMBER,\n * therefore we use 1-Jan-1970 instead\n */\nexport var ORDINAL_BASE = datetime(1970, 1, 1);\n/**\n * Python: MO-SU: 0 - 6\n * JS: SU-SAT 0 - 6\n */\nexport var PY_WEEKDAYS = [6, 0, 1, 2, 3, 4, 5];\n/**\n * py_date.timetuple()[7]\n */\nexport var getYearDay = function getYearDay(date) {\n  var dateNoTime = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());\n  return Math.ceil((dateNoTime.valueOf() - new Date(date.getUTCFullYear(), 0, 1).valueOf()) / ONE_DAY) + 1;\n};\nexport var isLeapYear = function isLeapYear(year) {\n  return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n};\nexport var isDate = function isDate(value) {\n  return value instanceof Date;\n};\nexport var isValidDate = function isValidDate(value) {\n  return isDate(value) && !isNaN(value.getTime());\n};\n/**\n * @return {Number} the date's timezone offset in ms\n */\nexport var tzOffset = function tzOffset(date) {\n  return date.getTimezoneOffset() * 60 * 1000;\n};\n/**\n * @see: <http://www.mcfedries.com/JavaScript/DaysBetween.asp>\n */\nexport var daysBetween = function daysBetween(date1, date2) {\n  // The number of milliseconds in one day\n  // Convert both dates to milliseconds\n  var date1ms = date1.getTime() - tzOffset(date1);\n  var date2ms = date2.getTime() - tzOffset(date2);\n  // Calculate the difference in milliseconds\n  var differencems = date1ms - date2ms;\n  // Convert back to days and return\n  return Math.round(differencems / ONE_DAY);\n};\n/**\n * @see: <http://docs.python.org/library/datetime.html#datetime.date.toordinal>\n */\nexport var toOrdinal = function toOrdinal(date) {\n  return daysBetween(date, ORDINAL_BASE);\n};\n/**\n * @see - <http://docs.python.org/library/datetime.html#datetime.date.fromordinal>\n */\nexport var fromOrdinal = function fromOrdinal(ordinal) {\n  return new Date(ORDINAL_BASE.getTime() + ordinal * ONE_DAY);\n};\nexport var getMonthDays = function getMonthDays(date) {\n  var month = date.getUTCMonth();\n  return month === 1 && isLeapYear(date.getUTCFullYear()) ? 29 : MONTH_DAYS[month];\n};\n/**\n * @return {Number} python-like weekday\n */\nexport var getWeekday = function getWeekday(date) {\n  return PY_WEEKDAYS[date.getUTCDay()];\n};\n/**\n * @see: <http://docs.python.org/library/calendar.html#calendar.monthrange>\n */\nexport var monthRange = function monthRange(year, month) {\n  var date = datetime(year, month + 1, 1);\n  return [getWeekday(date), getMonthDays(date)];\n};\n/**\n * @see: <http://docs.python.org/library/datetime.html#datetime.datetime.combine>\n */\nexport var combine = function combine(date, time) {\n  time = time || date;\n  return new Date(Date.UTC(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds()));\n};\nexport var clone = function clone(date) {\n  var dolly = new Date(date.getTime());\n  return dolly;\n};\nexport var cloneDates = function cloneDates(dates) {\n  var clones = [];\n  for (var i = 0; i < dates.length; i++) {\n    clones.push(clone(dates[i]));\n  }\n  return clones;\n};\n/**\n * Sorts an array of Date or Time objects\n */\nexport var sort = function sort(dates) {\n  dates.sort(function (a, b) {\n    return a.getTime() - b.getTime();\n  });\n};\nexport var timeToUntilString = function timeToUntilString(time, utc) {\n  if (utc === void 0) {\n    utc = true;\n  }\n  var date = new Date(time);\n  return [padStart(date.getUTCFullYear().toString(), 4, '0'), padStart(date.getUTCMonth() + 1, 2, '0'), padStart(date.getUTCDate(), 2, '0'), 'T', padStart(date.getUTCHours(), 2, '0'), padStart(date.getUTCMinutes(), 2, '0'), padStart(date.getUTCSeconds(), 2, '0'), utc ? 'Z' : ''].join('');\n};\nexport var untilStringToDate = function untilStringToDate(until) {\n  var re = /^(\\d{4})(\\d{2})(\\d{2})(T(\\d{2})(\\d{2})(\\d{2})Z?)?$/;\n  var bits = re.exec(until);\n  if (!bits) throw new Error(\"Invalid UNTIL value: \".concat(until));\n  return new Date(Date.UTC(parseInt(bits[1], 10), parseInt(bits[2], 10) - 1, parseInt(bits[3], 10), parseInt(bits[5], 10) || 0, parseInt(bits[6], 10) || 0, parseInt(bits[7], 10) || 0));\n};\nvar dateTZtoISO8601 = function dateTZtoISO8601(date, timeZone) {\n  // date format for sv-SE is almost ISO8601\n  var dateStr = date.toLocaleString('sv-SE', {\n    timeZone: timeZone\n  });\n  // '2023-02-07 10:41:36'\n  return dateStr.replace(' ', 'T') + 'Z';\n};\nexport var dateInTimeZone = function dateInTimeZone(date, timeZone) {\n  var localTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  // Date constructor can only reliably parse dates in ISO8601 format\n  var dateInLocalTZ = new Date(dateTZtoISO8601(date, localTimeZone));\n  var dateInTargetTZ = new Date(dateTZtoISO8601(date, timeZone !== null && timeZone !== void 0 ? timeZone : 'UTC'));\n  var tzOffset = dateInTargetTZ.getTime() - dateInLocalTZ.getTime();\n  return new Date(date.getTime() - tzOffset);\n};","map":null,"metadata":{},"sourceType":"module"}