{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\tiriq\\\\Documents\\\\Tiago\\\\MyThings\\\\MyProjects\\\\MySiteReact\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\tiriq\\\\Documents\\\\Tiago\\\\MyThings\\\\MyProjects\\\\MySiteReact\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\n/**\r\n * DevExtreme (esm/ui/html_editor/ui/formDialog.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../../core/renderer\";\nimport { extend } from \"../../../core/utils/extend\";\nimport Popup from \"../../popup\";\nimport Form from \"../../form\";\nimport { Deferred } from \"../../../core/utils/deferred\";\nimport localizationMessage from \"../../../localization/message\";\nimport { getCurrentScreenFactor, hasWindow } from \"../../../core/utils/window\";\nimport devices from \"../../../core/devices\";\nimport { isMaterial } from \"../../themes\";\nvar DIALOG_CLASS = \"dx-formdialog\";\nvar FORM_CLASS = \"dx-formdialog-form\";\nvar FormDialog = /*#__PURE__*/function () {\n  function FormDialog(editorInstance, popupConfig) {\n    _classCallCheck(this, FormDialog);\n    this._editorInstance = editorInstance;\n    this._popupUserConfig = popupConfig;\n    this._renderPopup();\n    this._attachOptionChangedHandler();\n  }\n  _createClass(FormDialog, [{\n    key: \"_renderPopup\",\n    value: function _renderPopup() {\n      var editorInstance = this._editorInstance;\n      var $container = $(\"<div>\").addClass(DIALOG_CLASS).appendTo(editorInstance.$element());\n      var popupConfig = this._getPopupConfig();\n      return editorInstance._createComponent($container, Popup, popupConfig);\n    }\n  }, {\n    key: \"_attachOptionChangedHandler\",\n    value: function _attachOptionChangedHandler() {\n      var _this = this;\n      var _this$_popup;\n      null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup.on(\"optionChanged\", function (_ref) {\n        var name = _ref.name,\n          value = _ref.value;\n        if (\"title\" === name) {\n          _this._updateFormLabel(value);\n        }\n      });\n    }\n  }, {\n    key: \"_escKeyHandler\",\n    value: function _escKeyHandler() {\n      this._popup.hide();\n    }\n  }, {\n    key: \"_addEscapeHandler\",\n    value: function _addEscapeHandler(e) {\n      e.component.registerKeyHandler(\"escape\", this._escKeyHandler.bind(this));\n    }\n  }, {\n    key: \"_isSmallScreen\",\n    value: function _isSmallScreen() {\n      var screenFactor = hasWindow() ? getCurrentScreenFactor() : null;\n      return \"phone\" === devices.real().deviceType || \"xs\" === screenFactor;\n    }\n  }, {\n    key: \"_getPopupConfig\",\n    value: function _getPopupConfig() {\n      var _this2 = this;\n      return extend({\n        onInitialized: function onInitialized(e) {\n          _this2._popup = e.component;\n          _this2._popup.on(\"hiding\", function () {\n            return _this2.onHiding();\n          });\n          _this2._popup.on(\"shown\", function () {\n            _this2._form.focus();\n          });\n        },\n        deferRendering: false,\n        focusStateEnabled: false,\n        showCloseButton: false,\n        fullScreen: this._isSmallScreen(),\n        contentTemplate: function contentTemplate(contentElem) {\n          var $formContainer = $(\"<div>\").appendTo(contentElem);\n          _this2._renderForm($formContainer, {\n            onEditorEnterKey: function onEditorEnterKey(e) {\n              return _this2.callAddButtonAction(e.event);\n            },\n            customizeItem: function customizeItem(item) {\n              if (\"simple\" === item.itemType) {\n                item.editorOptions = extend(true, {}, item.editorOptions, {\n                  onInitialized: _this2._addEscapeHandler.bind(_this2)\n                });\n              }\n            }\n          });\n        },\n        toolbarItems: [{\n          toolbar: \"bottom\",\n          location: \"after\",\n          widget: \"dxButton\",\n          options: {\n            onInitialized: this._addEscapeHandler.bind(this),\n            text: localizationMessage.format(\"OK\"),\n            onClick: function onClick(e) {\n              return _this2.callAddButtonAction(e.event);\n            }\n          }\n        }, {\n          toolbar: \"bottom\",\n          location: \"after\",\n          widget: \"dxButton\",\n          options: {\n            onInitialized: this._addEscapeHandler.bind(this),\n            text: localizationMessage.format(\"Cancel\"),\n            onClick: function onClick() {\n              _this2._popup.hide();\n            }\n          }\n        }],\n        _wrapperClassExternal: DIALOG_CLASS\n      }, this._popupUserConfig);\n    }\n  }, {\n    key: \"onHiding\",\n    value: function onHiding() {\n      this.beforeAddButtonAction = void 0;\n      this.deferred.reject();\n    }\n  }, {\n    key: \"callAddButtonAction\",\n    value: function callAddButtonAction(event) {\n      if (this.beforeAddButtonAction && !this.beforeAddButtonAction()) {\n        return;\n      }\n      this.hide(this._form.option(\"formData\"), event);\n    }\n  }, {\n    key: \"_renderForm\",\n    value: function _renderForm($container, options) {\n      $container.addClass(FORM_CLASS);\n      this._form = this._editorInstance._createComponent($container, Form, options);\n      this._updateFormLabel();\n    }\n  }, {\n    key: \"_updateFormLabel\",\n    value: function _updateFormLabel(text) {\n      var _this$_form;\n      var label = null !== text && void 0 !== text ? text : this.popupOption(\"title\");\n      null === (_this$_form = this._form) || void 0 === _this$_form ? void 0 : _this$_form.$element().attr(\"aria-label\", label);\n    }\n  }, {\n    key: \"_getDefaultFormOptions\",\n    value: function _getDefaultFormOptions() {\n      return {\n        colCount: 1,\n        width: \"auto\",\n        labelLocation: isMaterial() ? \"top\" : \"left\"\n      };\n    }\n  }, {\n    key: \"formOption\",\n    value: function formOption(optionName, optionValue) {\n      return this._form.option.apply(this._form, arguments);\n    }\n  }, {\n    key: \"show\",\n    value: function show(formUserConfig) {\n      if (this._popup.option(\"visible\")) {\n        return;\n      }\n      this.deferred = new Deferred();\n      var formConfig = extend(this._getDefaultFormOptions(), formUserConfig);\n      this._form.option(formConfig);\n      this._popup.show();\n      return this.deferred.promise();\n    }\n  }, {\n    key: \"hide\",\n    value: function hide(formData, event) {\n      this.deferred.resolve(formData, event);\n      this._popup.hide();\n    }\n  }, {\n    key: \"popupOption\",\n    value: function popupOption(optionName, optionValue) {\n      return this._popup.option.apply(this._popup, arguments);\n    }\n  }]);\n  return FormDialog;\n}();\nexport default FormDialog;","map":null,"metadata":{},"sourceType":"module"}